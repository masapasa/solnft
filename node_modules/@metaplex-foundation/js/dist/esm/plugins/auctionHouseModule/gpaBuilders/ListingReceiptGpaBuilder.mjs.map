{"version":3,"file":"ListingReceiptGpaBuilder.mjs","sources":["../../../../../src/plugins/auctionHouseModule/gpaBuilders/ListingReceiptGpaBuilder.ts"],"sourcesContent":["import { GpaBuilder } from '@/utils';\nimport { PublicKey } from '@solana/web3.js';\n\ntype AccountDiscriminator = [\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number,\n  number\n];\n// TODO: copied from auction house SDK\n// SDK should either provide a GPA builder or expose this discriminator\nconst listingReceiptDiscriminator: AccountDiscriminator = [\n  240, 71, 225, 94, 200, 75, 84, 231,\n];\n\nconst PUBLIC_KEY_LENGTH = PublicKey.default.toBytes().byteLength;\n\nconst TRADE_STATE = listingReceiptDiscriminator.length;\nconst BOOKKEEPER = TRADE_STATE + PUBLIC_KEY_LENGTH;\nconst AUCTION_HOUSE = BOOKKEEPER + PUBLIC_KEY_LENGTH;\nconst SELLER = AUCTION_HOUSE + PUBLIC_KEY_LENGTH;\nconst METADATA = SELLER + PUBLIC_KEY_LENGTH;\n\nexport class ListingReceiptGpaBuilder extends GpaBuilder {\n  whereDiscriminator(discrimator: AccountDiscriminator) {\n    return this.where(0, Buffer.from(discrimator));\n  }\n\n  listingReceiptAccounts() {\n    return this.whereDiscriminator(listingReceiptDiscriminator);\n  }\n\n  whereAuctionHouse(auctionHouseAddress: PublicKey) {\n    return this.listingReceiptAccounts().where(\n      AUCTION_HOUSE,\n      auctionHouseAddress\n    );\n  }\n\n  whereSeller(sellerAddress: PublicKey) {\n    return this.listingReceiptAccounts().where(SELLER, sellerAddress);\n  }\n\n  whereMetadata(metadataAddress: PublicKey) {\n    return this.listingReceiptAccounts().where(METADATA, metadataAddress);\n  }\n}\n"],"names":["listingReceiptDiscriminator","PUBLIC_KEY_LENGTH","PublicKey","default","toBytes","byteLength","TRADE_STATE","length","BOOKKEEPER","AUCTION_HOUSE","SELLER","METADATA","ListingReceiptGpaBuilder","GpaBuilder","whereDiscriminator","discrimator","where","Buffer","from","listingReceiptAccounts","whereAuctionHouse","auctionHouseAddress","whereSeller","sellerAddress","whereMetadata","metadataAddress"],"mappings":";;;AAaA;AACA;AACA,MAAMA,2BAAiD,GAAG,CACxD,GADwD,EACnD,EADmD,EAC/C,GAD+C,EAC1C,EAD0C,EACtC,GADsC,EACjC,EADiC,EAC7B,EAD6B,EACzB,GADyB,CAA1D,CAAA;AAIA,MAAMC,iBAAiB,GAAGC,SAAS,CAACC,OAAV,CAAkBC,OAAlB,GAA4BC,UAAtD,CAAA;AAEA,MAAMC,WAAW,GAAGN,2BAA2B,CAACO,MAAhD,CAAA;AACA,MAAMC,UAAU,GAAGF,WAAW,GAAGL,iBAAjC,CAAA;AACA,MAAMQ,aAAa,GAAGD,UAAU,GAAGP,iBAAnC,CAAA;AACA,MAAMS,MAAM,GAAGD,aAAa,GAAGR,iBAA/B,CAAA;AACA,MAAMU,QAAQ,GAAGD,MAAM,GAAGT,iBAA1B,CAAA;AAEO,MAAMW,wBAAN,SAAuCC,UAAvC,CAAkD;EACvDC,kBAAkB,CAACC,WAAD,EAAoC;IACpD,OAAO,IAAA,CAAKC,KAAL,CAAW,CAAX,EAAcC,MAAM,CAACC,IAAP,CAAYH,WAAZ,CAAd,CAAP,CAAA;AACD,GAAA;;AAEDI,EAAAA,sBAAsB,GAAG;AACvB,IAAA,OAAO,IAAKL,CAAAA,kBAAL,CAAwBd,2BAAxB,CAAP,CAAA;AACD,GAAA;;EAEDoB,iBAAiB,CAACC,mBAAD,EAAiC;IAChD,OAAO,IAAA,CAAKF,sBAAL,EAA8BH,CAAAA,KAA9B,CACLP,aADK,EAELY,mBAFK,CAAP,CAAA;AAID,GAAA;;EAEDC,WAAW,CAACC,aAAD,EAA2B;IACpC,OAAO,IAAA,CAAKJ,sBAAL,EAA8BH,CAAAA,KAA9B,CAAoCN,MAApC,EAA4Ca,aAA5C,CAAP,CAAA;AACD,GAAA;;EAEDC,aAAa,CAACC,eAAD,EAA6B;IACxC,OAAO,IAAA,CAAKN,sBAAL,EAA8BH,CAAAA,KAA9B,CAAoCL,QAApC,EAA8Cc,eAA9C,CAAP,CAAA;AACD,GAAA;;AAtBsD;;;;"}