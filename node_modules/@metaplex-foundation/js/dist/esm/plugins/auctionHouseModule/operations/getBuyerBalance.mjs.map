{"version":3,"file":"getBuyerBalance.mjs","sources":["../../../../../src/plugins/auctionHouseModule/operations/getBuyerBalance.ts"],"sourcesContent":["import { Commitment, PublicKey } from '@solana/web3.js';\nimport type { Metaplex } from '@/Metaplex';\nimport { useOperation, Operation, OperationHandler, SolAmount } from '@/types';\nimport { findAuctionHouseBuyerEscrowPda } from '../pdas';\n\n// -----------------\n// Operation\n// -----------------\n\nconst Key = 'GetBuyerBalanceOperation' as const;\n\n/**\n * Gets the balance of a buyer's escrow account for a given Auction House.\n *\n * ```ts\n * await metaplex\n *   .auctionHouse()\n *   .getBuyerBalance({ auctionHouse, buyerAddress })\n *   .run();\n * ```\n *\n * @group Operations\n * @category Constructors\n */\nexport const getBuyerBalanceOperation =\n  useOperation<GetBuyerBalanceOperation>(Key);\n\n/**\n * @group Operations\n * @category Types\n */\nexport type GetBuyerBalanceOperation = Operation<\n  typeof Key,\n  GetBuyerBalanceInput,\n  GetBuyerBalanceOutput\n>;\n\n/**\n * @group Operations\n * @category Inputs\n */\nexport type GetBuyerBalanceInput = {\n  /** The Auction House in which to get the buyer's escrow balance. */\n  auctionHouse: PublicKey;\n\n  /** The buyer's address. */\n  buyerAddress: PublicKey;\n\n  /** The level of commitment desired when querying the blockchain. */\n  commitment?: Commitment;\n};\n\n/**\n * @group Operations\n * @category Outputs\n */\nexport type GetBuyerBalanceOutput = SolAmount;\n\n/**\n * @group Operations\n * @category Handlers\n */\nexport const getBuyerBalanceOperationHandler: OperationHandler<GetBuyerBalanceOperation> =\n  {\n    handle: async (operation: GetBuyerBalanceOperation, metaplex: Metaplex) => {\n      const { auctionHouse, buyerAddress, commitment } = operation.input;\n\n      const buyerEscrow = findAuctionHouseBuyerEscrowPda(\n        auctionHouse,\n        buyerAddress\n      );\n\n      return metaplex.rpc().getBalance(buyerEscrow, commitment);\n    },\n  };\n"],"names":["Key","getBuyerBalanceOperation","useOperation","getBuyerBalanceOperationHandler","handle","operation","metaplex","auctionHouse","buyerAddress","commitment","input","buyerEscrow","findAuctionHouseBuyerEscrowPda","rpc","getBalance"],"mappings":";;;AAMA;AACA;;AAEA,MAAMA,GAAG,GAAG,0BAAZ,CAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;MACaC,wBAAwB,GACnCC,YAAY,CAA2BF,GAA3B,EADP;AAGP;AACA;AACA;AACA;;AA4BA;AACA;AACA;AACA;AACO,MAAMG,+BAA2E,GACtF;AACEC,EAAAA,MAAM,EAAE,OAAOC,SAAP,EAA4CC,QAA5C,KAAmE;IACzE,MAAM;MAAEC,YAAF;MAAgBC,YAAhB;AAA8BC,MAAAA,UAAAA;KAAeJ,GAAAA,SAAS,CAACK,KAA7D,CAAA;AAEA,IAAA,MAAMC,WAAW,GAAGC,8BAA8B,CAChDL,YADgD,EAEhDC,YAFgD,CAAlD,CAAA;IAKA,OAAOF,QAAQ,CAACO,GAAT,EAAA,CAAeC,UAAf,CAA0BH,WAA1B,EAAuCF,UAAvC,CAAP,CAAA;AACD,GAAA;AAVH;;;;"}